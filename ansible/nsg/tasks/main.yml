- name: NSG for running containers
  azure.azcollection.azure_rm_securitygroup:
    resource_group: "{{ resource_group }}"
    name: "{{ nsg }}"
    rules:
      - name: SSH
        protocol: Tcp
        direction: Inbound
        access: Allow
        priority: 300
        source_port_range: '*'
        destination_port_range: '22'
        source_address_prefix: '41.215.171.247'
        destination_address_prefix: '*'
      
      - name: custom54412SSH
        protocol: Tcp
        direction: Inbound
        access: Allow
        priority: 1100
        source_port_range: '*'
        destination_port_range: '54412'
        source_address_prefix: '41.215.171.247'
        destination_address_prefix: '*'
     
      - name: AllowCidrBlockHTPPSInbound
        protocol: Tcp
        direction: Inbound
        access: Allow
        priority: 1110
        source_port_range: '*'
        destination_port_range: '443'
        source_address_prefix: '41.215.171.247'
        destination_address_prefix: '*'

      - name: ICMP
        protocol: ICMP
        direction: Inbound
        access: Allow
        priority: 1120
        source_port_range: '*'
        destination_port_range: '*'
        source_address_prefix: '41.215.171.247'
        destination_address_prefix: '*'       

  become: yes
